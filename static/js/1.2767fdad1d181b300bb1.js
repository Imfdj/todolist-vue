webpackJsonp([1],{"3cXf":function(e,t,r){e.exports={default:r("RJ+u"),__esModule:!0}},A8ri:function(e,t){},P7ry:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("3cXf"),s=r.n(i),o={name:"Login",data:function(){return{baseUrl:this.$intfcUrl,loginForm:{email:null,password:null},dialogRegisterVisible:!1,registerForm:{email:"",password:"",name:""},checkedPwd:!1}},beforeMount:function(){var e=JSON.parse(localStorage.getItem("todolist_LoginUser"));e&&(this.loginForm.email=e.email,this.loginForm.password=e.password,this.checkedPwd=e.checkedPwd)},methods:{openRegister:function(){this.dialogRegisterVisible=!0},submitRegisterForm:function(e){var t=this;t.$refs[e].validate(function(e){e&&t.$http.post("/v1/users",{name:t.registerForm.name,password:t.registerForm.password,email:t.registerForm.email}).then(function(e){0==e.data.code?(t.dialogRegisterVisible=!1,t.$message({message:"注册成功",type:"success"})):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message({message:"服务器繁忙，请稍候再试",type:"error"})})})},submitForm:function(e){var t=this;t.$refs[e].validate(function(e){e&&t.$http.get("/todolist-vue/todolist-vue/static/data/user.json",{email:t.loginForm.email,password:t.loginForm.password}).then(function(e){if(0==e.data.code){var r={};localStorage.setItem("todolist_user",s()(e.data.data)),t.$router.push({name:"Home"}),t.checkedPwd?(r.password=t.loginForm.password,r.email=t.loginForm.email,r.checkedPwd=!0):(r.email=t.loginForm.email,r.password=null,r.checkedPwd=!1),localStorage.setItem("todolist_LoginUser",s()(r))}else t.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e),t.$message({message:"服务器繁忙，请稍候再试",type:"error"})})})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"login-wrap"},[e._m(0),e._v(" "),r("el-form",{ref:"loginFormEl",staticClass:"demo-ruleForm",staticStyle:{width:"370px"},attrs:{model:e.loginForm,"status-icon":"","label-width":"70px"}},[r("el-form-item",{attrs:{label:"帐号",prop:"email",rules:[{required:!0,message:"请输入帐号",trigger:"blur"},{type:"email",message:"格式有误",trigger:"blur"}]}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("loginFormEl")}},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"请输入6-20个字符",trigger:"blur"}]}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("loginFormEl")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),r("el-checkbox",{model:{value:e.checkedPwd,callback:function(t){e.checkedPwd=t},expression:"checkedPwd"}},[e._v("记住密码")])],1),e._v(" "),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginFormEl")}}},[e._v("登录")])],1),e._v(" "),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.openRegister}},[e._v("注册")])],1)],1)],1),e._v(" "),r("div",[r("el-dialog",{attrs:{title:"注册",visible:e.dialogRegisterVisible},on:{"update:visible":function(t){e.dialogRegisterVisible=t}}},[r("el-form",{ref:"registerForm",staticClass:"demo-ruleForm",staticStyle:{width:"370px",margin:"0 auto"},attrs:{model:e.registerForm,"status-icon":"","label-width":"80px"}},[r("el-form-item",{attrs:{label:"昵称",prop:"name",rules:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:3,max:30,message:"请输入3-30个字符",trigger:"blur"}]}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱账号",prop:"email",rules:[{required:!0,message:"请输入邮箱账号",trigger:"blur"},{type:"email",message:"格式有误",trigger:"blur"}]}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"请输入6-20个字符",trigger:"blur"}]}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRegisterForm("registerForm")}}},[e._v("提交")])],1)],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-title"},[t("i",{staticClass:"icon iconfont icon-todoist",staticStyle:{"font-size":"100px",color:"red"}}),this._v(" "),t("div",[this._v("\n                ToDoList\n            ")])])}]};var l=r("C7Lr")(o,a,!1,function(e){r("A8ri")},"data-v-275f659b",null);t.default=l.exports},"RJ+u":function(e,t,r){var i=r("AKd3"),s=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}}});
//# sourceMappingURL=1.2767fdad1d181b300bb1.js.map